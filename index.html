<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Double Pendulum Simulator (p5.js + math.js)</title>
		<link rel="stylesheet" href="style.css" />
		<!-- p5.js -->
		<script src="https://cdn.jsdelivr.net/npm/p5@1.9.3/lib/p5.min.js"></script>
		<!-- math.js -->
		<script src="https://cdn.jsdelivr.net/npm/mathjs@13.0.1/lib/browser/math.js"></script>
	</head>
	<body>
		<div id="app">
			<div id="sim-pane">
				<div id="canvas-holder" aria-label="Simulation viewport"></div>
				<div id="sim-controls-inline">
					<button id="resetBtn" title="Reset simulation">Reset</button>
					<button id="pausePlayBtn" title="Pause/Play simulation">Pause</button>
					<span class="hint">Drag bobs or pivot to set initial state. Click “Add Force”, then click in the viewport to place a force.</span>
				</div>
			</div>
			<aside id="control-pane" aria-label="Controls">
				<h2>Parameters</h2>

				<section class="group">
					<h3>Environment</h3>
					<label>
						Gravity g (px/s²)
						<input id="gravity" type="range" min="-50" max="50" step="0.1" value="0" />
						<output id="gravityOut">0</output>
					</label>
					<label>
						Air resistance c (kg/s)
						<input id="air" type="range" min="0" max="2" step="0.01" value="0" />
						<output id="airOut">0</output>
					</label>
					<div class="row">
						<label class="checkbox">
							<input id="collideBobs" type="checkbox" /> Bobs collide
						</label>
					</div>
				</section>

				<section class="group">
					<h3>Geometry</h3>
					<div class="row2">
						<label>
							Length L1 (px)
							<input id="L1" type="number" min="10" max="800" step="1" value="200" />
						</label>
						<label>
							Length L2 (px)
							<input id="L2" type="number" min="10" max="800" step="1" value="200" />
						</label>
					</div>
					<div class="row2">
						<label>
							Angle θ1 (deg)
							<input id="theta1" type="number" min="-180" max="180" step="1" value="-30" />
						</label>
						<label>
							Angle θ2 (deg)
							<input id="theta2" type="number" min="-180" max="180" step="1" value="-30" />
						</label>
					</div>
					<div class="row">
						<button id="applyAnglesBtn">Apply angles</button>
					</div>
				</section>

				<section class="group">
					<h3>Elasticity</h3>
					<label>
						String 1 elasticity (%)
						<input id="elast1" type="range" min="0" max="100" step="1" value="100" />
						<output id="elast1Out">100%</output>
					</label>
					<label>
						String 2 elasticity (%)
						<input id="elast2" type="range" min="0" max="100" step="1" value="100" />
						<output id="elast2Out">100%</output>
					</label>
				</section>

				<section class="group">
					<h3>Masses</h3>
					<div class="row2">
						<label>
							Bob m1 (kg)
							<input id="m1" type="number" min="0.1" step="0.1" value="1" />
						</label>
						<label>
							Bob m2 (kg)
							<input id="m2" type="number" min="0.1" step="0.1" value="1" />
						</label>
					</div>
					<div class="row2">
						<label>
							String 1 mass (kg)
							<input id="ms1" type="number" min="0" step="0.1" value="0" />
						</label>
						<label>
							String 2 mass (kg)
							<input id="ms2" type="number" min="0" step="0.1" value="0" />
						</label>
					</div>
				</section>

				<section class="group">
					<h3>External Forces</h3>
					<div class="row">
						<button id="addForceBtn">Add force</button>
					</div>
					<div id="forceList"></div>
				</section>

				<section class="group smallprint">
					<details>
						<summary>Advanced</summary>
						<label>
							Time step dt (s) per frame
							<input id="dt" type="number" step="0.001" value="0.016" />
						</label>
						<label>
							Sub-steps (per frame)
							<input id="substeps" type="number" min="1" max="50" step="1" value="5" />
						</label>
					</details>
				</section>

				<footer>
					<span>Powered by p5.js and math.js</span>
				</footer>
			</aside>
		</div>

		<script src="script.js"></script>
	</body>
	</html>

